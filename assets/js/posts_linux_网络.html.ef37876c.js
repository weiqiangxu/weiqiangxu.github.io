"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1090],{6262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,n]of s)a[i]=n;return a}},2156:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>h,data:()=>t});var n=a(641);const l={},h=(0,a(6262).A)(l,[["render",function(i,s){return(0,n.uX)(),(0,n.CE)("div",null,s[0]||(s[0]=[(0,n.Fv)('<h1 id="linux与网络" tabindex="-1"><a class="header-anchor" href="#linux与网络"><span>linux与网络</span></a></h1><h3 id="一、网桥" tabindex="-1"><a class="header-anchor" href="#一、网桥"><span>一、网桥</span></a></h3><ol><li>网络设备，连接多个网络。</li><li>转发不同网络之中的数据流。</li><li>工作在OSI模型的第二层：数据链路层，通过物理地址（MAC地址）识别网络设备来传递数据包</li></ol><blockquote><p>可以减少网络冲突</p></blockquote><h3 id="二、网段" tabindex="-1"><a class="header-anchor" href="#二、网段"><span>二、网段</span></a></h3><ol><li>网络地址范围 (表示方式：IP地址和子网掩码)</li><li>同一网段的设备可互相通信，不同网段需要路由器等设备才可痛心</li></ol><h3 id="三、iptable是什么" tabindex="-1"><a class="header-anchor" href="#三、iptable是什么"><span>三、iptable是什么</span></a></h3><ol><li>一个防火墙工具</li><li>控制网络数据包的流动</li></ol><h3 id="四、iptable基本用法" tabindex="-1"><a class="header-anchor" href="#四、iptable基本用法"><span>四、iptable基本用法</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 添加一个规则，允许 TCP:80端口 输入流量</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ACCEPT</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看规则</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># eth0 接口的地址转换为 NAT 地址</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> POSTROUTING</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MASQUERADE</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="五、iptable的nat是什么意思" tabindex="-1"><a class="header-anchor" href="#五、iptable的nat是什么意思"><span>五、iptable的NAT是什么意思</span></a></h3><ol><li>NAT表示网络地址转换</li><li>将私有IP地址映射到公共IP地址的技术</li></ol><h3 id="六、怎么解读-iptables-nl-t-nat-列出nat表格转发规则" tabindex="-1"><a class="header-anchor" href="#六、怎么解读-iptables-nl-t-nat-列出nat表格转发规则"><span>六、怎么解读 iptables -nL -t nat (列出NAT表格转发规则)</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@i-C5B261D3 ~]# iptables -nL -t nat</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">规则链</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Chain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> POSTROUTING</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (policy </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ACCEPT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     prot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">KUBE-POSTROUTING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            /</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubernetes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> postrouting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rules</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LIBVIRT_PRT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0/0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">规则链</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Chain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-KUBELET-CANARY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (0 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">references</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     prot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">规则链</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Chain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-MARK-DROP</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (0 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">references</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     prot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MARK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            MARK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x8000</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">规则链</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Chain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-MARK-MASQ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (0 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">references</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     prot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MARK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            MARK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x4000</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">规则链</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Chain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-POSTROUTING</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (1 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">references</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     prot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RETURN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            mark</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> match</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> !</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x4000/0x4000</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MARK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            MARK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xor</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x4000</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MASQUERADE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            /</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubernetes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> traffic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> requiring</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SNAT</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> random-fully</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">规则链</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Chain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LIBVIRT_PRT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (1 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">references</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     prot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RETURN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     224.0.0.0/24</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RETURN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  192.168.122.0/24</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     255.255.255.255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MASQUERADE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    !192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     masq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ports:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1024-65535</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MASQUERADE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  udp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    !192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     masq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ports:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1024-65535</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MASQUERADE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  all</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    !192.168.122.0/24</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>target</code>：目标，表示这条规则的动作，比如 ACCEPT/REJECT/DROP 等。</li><li><code>prot</code>：协议，表示这条规则所匹配的协议，比如 TCP/UDP/ICMP 等。</li><li><code>opt</code>：选项，表示这条规则所匹配的选项，比如 --dport/--sport 等。</li><li><code>source</code>：源地址，表示这条规则所匹配的源 IP 地址或网段。</li><li><code>destination</code>：目标地址，表示这条规则所匹配的目标 IP 地址或网段。</li></ul><p>在 iptables 输出中，target 字段表示数据包应该被送往哪里。 以下是常见的 target 值的含义：</p><ul><li>ACCEPT：表示允许数据包通过防火墙；</li><li>DROP：表示丢弃（拒绝）数据包，不给任何回应；</li><li>REJECT：表示拒绝数据包，并发送 ICMP 错误消息给发送者；</li><li>LOG：表示记录数据包信息（如源 IP，目的 IP，端口等）到系统日志中；</li><li>RETURN：表示返回到调用链的上一层规则；</li><li>SNAT：表示源地址转换，更改数据包的源 IP 地址；</li><li>DNAT：表示目标地址转换，更改数据包的目标 IP 地址；</li><li>MASQUERADE：表示伪装 NAT，常用于连接到互联网的局域网内网设备；</li><li>REDIRECT：表示重定向到指定的端口或 IP 地址；</li><li>MARK：表示给数据包打标签，以便后续规则匹配使用。</li></ul><h3 id="七、brctl-show-显示linux机器上的桥接设备" tabindex="-1"><a class="header-anchor" href="#七、brctl-show-显示linux机器上的桥接设备"><span>七、brctl show 显示Linux机器上的桥接设备</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 网桥连接虚拟机的网卡和物理机的网卡 （连接多个网络的）</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@i-C5B261D3 ~]# brctl show</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bridge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （名称）</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    bridge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （唯一标识符，由MAC地址生成）</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> STP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enabled</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （防止桥环路协议是否启用）</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   interfaces</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （该bridge下所连接的接口）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">virbr0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          8000.5254000ae93a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       yes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             virbr0-nic</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cidr" tabindex="-1"><a class="header-anchor" href="#cidr"><span>cidr</span></a></h3><p>https://tool.lu/zh_CN/cidr/</p><p>CIDR（Classless Inter-Domain Routing）是互联网中一种新的寻址方式，表示为：IP地址/网络ID的位数。 比如192.168.1.0/24，那么ip地址前24位是网络部分，后面8位是主机部分</p><h3 id="ip-a" tabindex="-1"><a class="header-anchor" href="#ip-a"><span>ip a</span></a></h3><h3 id="etc-network-interfaces-d-文件夹干嘛的" tabindex="-1"><a class="header-anchor" href="#etc-network-interfaces-d-文件夹干嘛的"><span>/etc/network/interfaces.d 文件夹干嘛的</span></a></h3><ul><li>存放网络接口配置文件的文件夹</li><li>内部每个配置文件描述了一个网络接口</li></ul><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" data-title="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>其中网络接口的字段有</span></span>\n<span class="line"><span>netmask：指定网络掩码，用于确定网络地址和主机地址的范围。</span></span>\n<span class="line"><span>address：指定网络接口的IP地址。</span></span>\n<span class="line"><span>gateway：指定默认网关，即发送到其他网络的数据包要通过该网关转发。</span></span>\n<span class="line"><span>dns-nameservers：指定域名系统（DNS）服务器的IP地址，用于解析域名为IP地址。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="网络掩码是什么" tabindex="-1"><a class="header-anchor" href="#网络掩码是什么"><span>网络掩码是什么</span></a></h3><ul><li>定义一个IP地址的网络部分和主机部分。（这句话什么意思呢，每个IP地址都是一个32位的二进制，这个掩码代表了前多少位是网路部分，后面的多少位是主机部分）</li></ul><h3 id="ip地址为192-168-1-1-网络掩码为255-255-255-0-那么设备所在的网络范围是什么-怎么计算的" tabindex="-1"><a class="header-anchor" href="#ip地址为192-168-1-1-网络掩码为255-255-255-0-那么设备所在的网络范围是什么-怎么计算的"><span>IP地址为192.168.1.1，网络掩码为255.255.255.0，那么设备所在的网络范围是什么，怎么计算的</span></a></h3><ul><li>网络掩码255.255.255.0代表设备的IP地址中，前24位是网络地址（192.168.1），后面的8位就是主机地址</li><li>该设备所在的网络范围是192.168.1.0/24</li></ul><p>如果网络掩码为255.255.248.0，那么转换二进制子网掩码：11111111.11111111.11111000.00000000，刚好21位，那么IP地址的前21位是网络ID，后11位是主机ID，网络范围是192.168.0.0/21。也就是说IP地址范围为192.168.0.1 ~ 192.168.7.254</p>',31)]))}]]),t=JSON.parse('{"path":"/posts/linux/%E7%BD%91%E7%BB%9C.html","title":"linux与网络","lang":"zh-CN","frontmatter":{"title":"linux与网络","index_img":"/images/bg/linux.jpeg","banner_img":"/images/bg/5.jpg","tags":["linux"],"categories":["linux"],"date":"2023-05-18T18:40:12.000Z","excerpt":"网络相关的一些知识","hide":false,"description":"linux与网络 一、网桥 网络设备，连接多个网络。 转发不同网络之中的数据流。 工作在OSI模型的第二层：数据链路层，通过物理地址（MAC地址）识别网络设备来传递数据包 可以减少网络冲突 二、网段 网络地址范围 (表示方式：IP地址和子网掩码) 同一网段的设备可互相通信，不同网段需要路由器等设备才可痛心 三、iptable是什么 一个防火墙工具 控制...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://weiqiangxu.github.io/posts/linux/%E7%BD%91%E7%BB%9C.html"}],["meta",{"property":"og:site_name","content":"QuickStart程序员"}],["meta",{"property":"og:title","content":"linux与网络"}],["meta",{"property":"og:description","content":"linux与网络 一、网桥 网络设备，连接多个网络。 转发不同网络之中的数据流。 工作在OSI模型的第二层：数据链路层，通过物理地址（MAC地址）识别网络设备来传递数据包 可以减少网络冲突 二、网段 网络地址范围 (表示方式：IP地址和子网掩码) 同一网段的设备可互相通信，不同网段需要路由器等设备才可痛心 三、iptable是什么 一个防火墙工具 控制..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:published_time","content":"2023-05-18T18:40:12.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"linux与网络\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-05-18T18:40:12.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuweiqiang\\",\\"url\\":\\"https://weiqiangxu.github.io\\"}]}"]]},"headers":[{"level":3,"title":"一、网桥","slug":"一、网桥","link":"#一、网桥","children":[]},{"level":3,"title":"二、网段","slug":"二、网段","link":"#二、网段","children":[]},{"level":3,"title":"三、iptable是什么","slug":"三、iptable是什么","link":"#三、iptable是什么","children":[]},{"level":3,"title":"四、iptable基本用法","slug":"四、iptable基本用法","link":"#四、iptable基本用法","children":[]},{"level":3,"title":"五、iptable的NAT是什么意思","slug":"五、iptable的nat是什么意思","link":"#五、iptable的nat是什么意思","children":[]},{"level":3,"title":"六、怎么解读 iptables -nL -t nat (列出NAT表格转发规则)","slug":"六、怎么解读-iptables-nl-t-nat-列出nat表格转发规则","link":"#六、怎么解读-iptables-nl-t-nat-列出nat表格转发规则","children":[]},{"level":3,"title":"七、brctl show 显示Linux机器上的桥接设备","slug":"七、brctl-show-显示linux机器上的桥接设备","link":"#七、brctl-show-显示linux机器上的桥接设备","children":[]},{"level":3,"title":"cidr","slug":"cidr","link":"#cidr","children":[]},{"level":3,"title":"ip a","slug":"ip-a","link":"#ip-a","children":[]},{"level":3,"title":"/etc/network/interfaces.d 文件夹干嘛的","slug":"etc-network-interfaces-d-文件夹干嘛的","link":"#etc-network-interfaces-d-文件夹干嘛的","children":[]},{"level":3,"title":"网络掩码是什么","slug":"网络掩码是什么","link":"#网络掩码是什么","children":[]},{"level":3,"title":"IP地址为192.168.1.1，网络掩码为255.255.255.0，那么设备所在的网络范围是什么，怎么计算的","slug":"ip地址为192-168-1-1-网络掩码为255-255-255-0-那么设备所在的网络范围是什么-怎么计算的","link":"#ip地址为192-168-1-1-网络掩码为255-255-255-0-那么设备所在的网络范围是什么-怎么计算的","children":[]}],"readingTime":{"minutes":4.26,"words":1279},"filePathRelative":"posts/linux/网络.md","localizedDate":"2023年5月19日","autoDesc":true}')}}]);