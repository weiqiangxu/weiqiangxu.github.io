"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5046],{6262:(e,s)=>{s.A=(e,s)=>{const i=e.__vccOpts||e;for(const[e,a]of s)i[e]=a;return i}},4974:(e,s,i)=>{i.r(s),i.d(s,{comp:()=>l,data:()=>t});var a=i(641);const n={},l=(0,i(6262).A)(n,[["render",function(e,s){return(0,a.uX)(),(0,a.CE)("div",null,s[0]||(s[0]=[(0,a.Fv)('<h1 id="rdb快照" tabindex="-1"><a class="header-anchor" href="#rdb快照"><span>RDB快照</span></a></h1><blockquote><p>某一个瞬间的内存数据</p></blockquote><h3 id="命令" tabindex="-1"><a class="header-anchor" href="#命令"><span>命令</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>SAVE</span></span>\n<span class="line"><span>BGSAVE</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="优点" tabindex="-1"><a class="header-anchor" href="#优点"><span>优点</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>二进制</span></span>\n<span class="line"><span>数据恢复效率更高</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点"><span>缺点</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>全量快照开销大</span></span>\n<span class="line"><span>通常5min快照一次，数据丢失量也大</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="记录快照和数据修改的冲突" tabindex="-1"><a class="header-anchor" href="#记录快照和数据修改的冲突"><span>记录快照和数据修改的冲突</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>写时复制技术（Copy-On-Write, COW）</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>主进程(写读命令)和bgsave子进程共享所有内存数据</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>主进程更改数据前是将共享数据复制一份出来修改的(写时复制),极端情况所有内存修改那么所有内存都要复制</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>谨防内存占满</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="redis4-0-混合持久化" tabindex="-1"><a class="header-anchor" href="#redis4-0-混合持久化"><span>Redis4.0 混合持久化</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>redis.conf.aof-use-rdb-preamble yes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>准确来说就是既记录内存快照，也记录增量命令到AOF</p></blockquote>',13)]))}]]),t=JSON.parse('{"path":"/posts/redis/%E6%8C%81%E4%B9%85%E5%8C%96RDB%E5%BF%AB%E7%85%A7.html","title":"RDB快照","lang":"zh-CN","frontmatter":{"hide":true,"description":"RDB快照 某一个瞬间的内存数据 命令 优点 缺点 记录快照和数据修改的冲突 Redis4.0 混合持久化 准确来说就是既记录内存快照，也记录增量命令到AOF","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://weiqiangxu.github.io/posts/redis/%E6%8C%81%E4%B9%85%E5%8C%96RDB%E5%BF%AB%E7%85%A7.html"}],["meta",{"property":"og:site_name","content":"QuickStart程序员"}],["meta",{"property":"og:title","content":"RDB快照"}],["meta",{"property":"og:description","content":"RDB快照 某一个瞬间的内存数据 命令 优点 缺点 记录快照和数据修改的冲突 Redis4.0 混合持久化 准确来说就是既记录内存快照，也记录增量命令到AOF"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"RDB快照\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuweiqiang\\",\\"url\\":\\"https://weiqiangxu.github.io\\"}]}"]]},"headers":[{"level":3,"title":"命令","slug":"命令","link":"#命令","children":[]},{"level":3,"title":"优点","slug":"优点","link":"#优点","children":[]},{"level":3,"title":"缺点","slug":"缺点","link":"#缺点","children":[]},{"level":3,"title":"记录快照和数据修改的冲突","slug":"记录快照和数据修改的冲突","link":"#记录快照和数据修改的冲突","children":[]},{"level":3,"title":"Redis4.0 混合持久化","slug":"redis4-0-混合持久化","link":"#redis4-0-混合持久化","children":[]}],"readingTime":{"minutes":0.61,"words":183},"filePathRelative":"posts/redis/持久化RDB快照.md","excerpt":"\\n<blockquote>\\n<p>某一个瞬间的内存数据</p>\\n</blockquote>\\n<h3>命令</h3>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>SAVE</span></span>\\n<span class=\\"line\\"><span>BGSAVE</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);