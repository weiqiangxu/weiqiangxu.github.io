"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7012],{6262:(n,e)=>{e.A=(n,e)=>{const s=n.__vccOpts||n;for(const[n,i]of e)s[n]=i;return s}},3018:(n,e,s)=>{s.r(e),s.d(e,{comp:()=>t,data:()=>l});var i=s(641);const a={},t=(0,s(6262).A)(a,[["render",function(n,e){return(0,i.uX)(),(0,i.CE)("div",null,e[0]||(e[0]=[(0,i.Fv)('<h3 id="containerd-二进制安装" tabindex="-1"><a class="header-anchor" href="#containerd-二进制安装"><span>containerd 二进制安装</span></a></h3><p><a href="https://github.com/containerd/containerd/blob/main/docs/getting-started.md" target="_blank" rel="noopener noreferrer">github.com/containerd/containerd/blob/main/docs/getting-started.md</a></p><p><a href="https://github.com/containerd/containerd/releases" target="_blank" rel="noopener noreferrer">github.com/containerd/containerd/releases</a></p><h3 id="二进制包的命名格式" tabindex="-1"><a class="header-anchor" href="#二进制包的命名格式"><span>二进制包的命名格式</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>containerd-&lt;VERSION&gt;-&lt;OS&gt;-&lt;ARCH&gt;.tar.gz</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>https://github.com/containerd/containerd/releases/tag/v1.6.19</span></span>\n<span class="line"><span>containerd-1.6.19-linux-arm64.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解压" tabindex="-1"><a class="header-anchor" href="#解压"><span>解压</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>tar Cxzvf /usr/local containerd-1.6.19-linux-arm64.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="配置-systemctl" tabindex="-1"><a class="header-anchor" href="#配置-systemctl"><span>配置 systemctl</span></a></h3><p><a href="https://github.com/containerd/containerd/blob/v1.6.19/containerd.service" target="_blank" rel="noopener noreferrer">https://github.com/containerd/containerd/blob/v1.6.19/containerd.service</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir -p /usr/local/lib/systemd/system</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>上述文件下载到 (注意下载对应的版本号的)</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>/usr/local/lib/systemd/system/containerd.service</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># 重新加载 service 文件</span></span>\n<span class="line"><span>$ systemctl daemon-reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="runc安装" tabindex="-1"><a class="header-anchor" href="#runc安装"><span>runc安装</span></a></h3><p><a href="https://github.com/opencontainers/runc/releases" target="_blank" rel="noopener noreferrer">https://github.com/opencontainers/runc/releases</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>安装到 /usr/local/sbin/runc</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>cp runc.arm64 /usr/local/bin/runc</span></span>\n<span class="line"><span>chmod +x /usr/local/bin/runc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装-cni-插件" tabindex="-1"><a class="header-anchor" href="#安装-cni-插件"><span>安装 CNI 插件</span></a></h3><p><a href="https://github.com/containernetworking/plugins/releases" target="_blank" rel="noopener noreferrer">https://github.com/containernetworking/plugins/releases</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir -p /opt/cni/bin</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># 解压到目录 /opt/cni/bin</span></span>\n<span class="line"><span>tar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.1.1.tgz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 启动 containerd 并设置开机启动 </span></span>\n<span class="line"><span>systemctl enable containerd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>containerd -v</span></span>\n<span class="line"><span>runc -v</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置文件-etc-containerd-config-toml" tabindex="-1"><a class="header-anchor" href="#配置文件-etc-containerd-config-toml"><span>配置文件 /etc/containerd/config.toml</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 生成默认配置</span></span>\n<span class="line"><span>mkdir -p /etc/containerd/</span></span>\n<span class="line"><span>containerd config default &gt; /etc/containerd/config.toml</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>vi /etc/containerd/config.toml</span></span>\n<span class="line"><span># [plugins.&quot;io.containerd.grpc.v1.cri&quot;] 下的 sandbox_image</span></span>\n<span class="line"><span># 修改为一个你可以获取到镜像的源地址，例如aliyun的</span></span>\n<span class="line"><span>sandbox_image=&quot;registry.aliyuncs.com/google_containers/pause:3.5&quot;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># 还有需要加上下面</span></span>\n<span class="line"><span>在[plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.runc]中加入</span></span>\n<span class="line"><span>  ...</span></span>\n<span class="line"><span>  [plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.runc.options]</span></span>\n<span class="line"><span>    SystemdCgroup = true</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># 重启 containerd</span></span>\n<span class="line"><span>sudo systemctl restart containerd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="crictl-安装" tabindex="-1"><a class="header-anchor" href="#crictl-安装"><span>crictl 安装</span></a></h1><p><a href="https://github.com/kubernetes-sigs/cri-tools/releases/" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes-sigs/cri-tools/releases/</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>tar -zxvf crictl-v1.24.0-linux-amd64.tar.gz -C /usr/local/bin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt; /etc/crictl.yaml &lt;&lt;EOF</span></span>\n<span class="line"><span>runtime-endpoint: unix:///var/run/containerd/containerd.sock</span></span>\n<span class="line"><span>image-endpoint: unix:///var/run/containerd/containerd.sock</span></span>\n<span class="line"><span>timeout: 10</span></span>\n<span class="line"><span>debug: false</span></span>\n<span class="line"><span>pull-image-on-create: false</span></span>\n<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 重启服务</span></span>\n<span class="line"><span>systemctl daemon-reload</span></span>\n<span class="line"><span>sytemctl restart containerd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ctr作为 containerd 项目的一部分，是安装 containerd 时默认提供的命令行客户端，具有镜像和容器管理的简单功能</span></span>\n<span class="line"><span>crictl是遵循 CRI 接口规范的一个命令行工具，通常用它来检查和管理 kubernetes 节点上的容器运行时和镜像</span></span>\n<span class="line"><span>nerdctl是一个相对较新的containerd命令行客户端。与ctr不同，nerdctl的目标是对用户友好并且和 docker兼容</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h3><p><a href="https://blog.csdn.net/qq_25874461/article/details/128358829" target="_blank" rel="noopener noreferrer">参考文档</a></p>',28)]))}]]),l=JSON.parse('{"path":"/posts/kubernetes/k8s%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85.html","title":"k8s的一些插件安装","lang":"zh-CN","frontmatter":{"title":"k8s的一些插件安装","tags":["runc","containerd"],"categories":["kubernetes"],"date":"2023-04-08T06:40:12.000Z","index_img":"/images/bg/computer.jpeg","description":"containerd 二进制安装 github.com/containerd/containerd/blob/main/docs/getting-started.md github.com/containerd/containerd/releases 二进制包的命名格式 解压 配置 systemctl https://github.com/contai...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://weiqiangxu.github.io/posts/kubernetes/k8s%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85.html"}],["meta",{"property":"og:site_name","content":"QuickStart程序员"}],["meta",{"property":"og:title","content":"k8s的一些插件安装"}],["meta",{"property":"og:description","content":"containerd 二进制安装 github.com/containerd/containerd/blob/main/docs/getting-started.md github.com/containerd/containerd/releases 二进制包的命名格式 解压 配置 systemctl https://github.com/contai..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"runc"}],["meta",{"property":"article:tag","content":"containerd"}],["meta",{"property":"article:published_time","content":"2023-04-08T06:40:12.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"k8s的一些插件安装\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-04-08T06:40:12.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuweiqiang\\",\\"url\\":\\"https://weiqiangxu.github.io\\"}]}"]]},"headers":[{"level":3,"title":"containerd 二进制安装","slug":"containerd-二进制安装","link":"#containerd-二进制安装","children":[]},{"level":3,"title":"二进制包的命名格式","slug":"二进制包的命名格式","link":"#二进制包的命名格式","children":[]},{"level":3,"title":"解压","slug":"解压","link":"#解压","children":[]},{"level":3,"title":"配置 systemctl","slug":"配置-systemctl","link":"#配置-systemctl","children":[]},{"level":3,"title":"runc安装","slug":"runc安装","link":"#runc安装","children":[]},{"level":3,"title":"安装 CNI 插件","slug":"安装-cni-插件","link":"#安装-cni-插件","children":[]},{"level":3,"title":"配置文件 /etc/containerd/config.toml","slug":"配置文件-etc-containerd-config-toml","link":"#配置文件-etc-containerd-config-toml","children":[]},{"level":3,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"readingTime":{"minutes":1.39,"words":418},"filePathRelative":"posts/kubernetes/k8s的一些插件安装.md","localizedDate":"2023年4月8日","excerpt":"<h3>containerd 二进制安装</h3>\\n<p><a href=\\"https://github.com/containerd/containerd/blob/main/docs/getting-started.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">github.com/containerd/containerd/blob/main/docs/getting-started.md</a></p>\\n<p><a href=\\"https://github.com/containerd/containerd/releases\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">github.com/containerd/containerd/releases</a></p>","autoDesc":true}')}}]);