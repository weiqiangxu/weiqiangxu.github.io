"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7091],{6262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,n]of s)a[i]=n;return a}},5030:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>e,data:()=>h});var n=a(641);const l={},e=(0,a(6262).A)(l,[["render",function(i,s){return(0,n.uX)(),(0,n.CE)("div",null,s[0]||(s[0]=[(0,n.Fv)('<h3 id="一、什么是dns" tabindex="-1"><a class="header-anchor" href="#一、什么是dns"><span>一、什么是DNS</span></a></h3><ol><li>DNS（Domain Name System）是一个用于将域名转换为与之关联的IP地址的分布式系统。</li></ol><p>在Linux上，有几个与DNS相关的配置：</p><h3 id="二、linux与dns相关命令" tabindex="-1"><a class="header-anchor" href="#二、linux与dns相关命令"><span>二、Linux与DNS相关命令</span></a></h3><ol><li><code>/etc/resolv.conf</code>文件：这个文件包含了DNS服务器的配置信息，如名称服务器的IP地址、搜索域等。</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 未配置DNS Server的</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@i-62BEC048 ~]# cat /etc/resolv.conf</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Generated by NetworkManager</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 已经配置了DNS Server的</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@i-62BEC048 ~]# cat /etc/resolv.conf</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Generated by NetworkManager</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nameserver</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 114.114.114.114</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Ubuntu 下 DNS 解析相关的命令<code>systemd-resolve</code></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1.查看 DNS 服务状态</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --status</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2.解析域名的的 IP</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DOMAIN</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 3.nslookup 解析domain</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nslookup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> baidu.com</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 4.设置网卡的 DNS Server</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --set-dns=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">DNS_SERVER_IP}</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {ITERFACE_NAME}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 5.重置网卡DNS配置</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --revert</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {ITERFACE_NAME}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 6.刷新网卡DNS缓存</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --flush-caches</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 7.查看DNS相关配置</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --statistics</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>hosts文件</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/hosts</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="q-a" tabindex="-1"><a class="header-anchor" href="#q-a"><span>Q&amp;A</span></a></h3><ol><li>nameserver 114.114.114.114是什么来的</li></ol><p>114.114.114.114是中国电信运营商提供的公共的DNS服务器。DNS服务器用于转换域名（如www.google.com）和IP地址之间的对应关系，以便让计算机能够在互联网上进行通信。通过指定114.114.114.114作为DNS服务器，可以使用中国电信的DNS服务来解析域名。</p><ol start="2"><li>server 8.8.8.8</li></ol><p><code>dns-nameservers 8.8.8.8</code>是用来指定DNS服务器的IP地址，其中8.8.8.8是Google提供的公共DNS服务器的IP地址。DNS服务器用于将域名解析为对应的IP地址。</p><p>在Linux上，可以通过设置<code>dns-nameservers</code>来指定所使用的DNS服务器。在上述示例中，<code>dns-nameservers 8.8.8.8</code>表示使用Google的DNS服务器进行域名解析。</p><p>在与<code>nameserver 114.114.114.114</code>的关系上，<code>nameserver 114.114.114.114</code>是指定的另一个DNS服务器的IP地址，由中国电信提供。不同的<code>nameserver</code>配置指定了不同的DNS服务器，用于解析域名。根据需要，可以根据实际情况选择使用不同的DNS服务器进行域名解析。</p><ul><li><p>VPC</p></li><li><p>overlay</p></li><li><p>VXLAN和VLAN</p></li><li><p>CIDR地址是什么意思</p></li><li><p>NAT</p></li><li><p>iptable和NAT是什么关系</p></li><li><p>如何查看linux的NAT规则</p></li></ul><p>iptables -t nat -L iptables -t nat -nvL</p><ul><li><p>来个nat的quickstart试试</p></li><li><p>来个vlan的quickstart试试</p></li><li><p>Trunk是什么和VLAN什么关系</p></li><li><p>有没有实验试试VLAN和Trunk</p></li><li><p>什么叫局域网，和子网什么关系</p></li><li><p>osi七层的二层为什么有的叫网络链路有的叫数据链路</p></li><li><p>和openvswich有类似功能的还有哪些 Linux Bridge</p></li><li><p>linux bridge实现vlan怎么做</p></li><li><p>linux bridge可以实现带宽控制吗</p></li></ul><p>使用tc</p><ul><li><p>TCP/IP 4层和OSI 7层的差异是什么</p></li><li><p>本机有两个网卡，各自的ip分别是192.168.2.1和172.45.6.7，使用go实现web服务，如何写go代码监听不同的网卡</p></li><li><p>使用NAT让8989端口流量转发到ip 172.114.2.5的80端口，怎么做，用iptable</p></li></ul><p>要使用iptables将8989端口的流量转发到IP 172.114.2.5的80端口，可以按照以下步骤进行设置：</p><ol><li>确保操作系统中已经安装了iptables，如果没有安装，可以使用以下命令进行安装：</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt-get update</span></span>\n<span class="line"><span>sudo apt-get install iptables</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>打开终端或SSH连接，使用root或具有sudo权限的用户进行以下步骤。</p></li><li><p>检查当前的iptables配置，可以使用以下命令查看：</p></li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo iptables -L</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果该命令显示的链策略默认为ACCEPT，那么你可以继续下一步。如果默认链策略是DROP，那么你需要添加相应的规则以允许转发流量。</p><ol start="4"><li>添加转发规则，使用以下命令：</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo iptables -t nat -A PREROUTING -p tcp --dport 8989 -j DNAT --to-destination 172.114.2.5:80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这条规则将所有目标端口为8989的TCP流量转发到IP 172.114.2.5的80端口。</p><ol start="5"><li>启用转发功能，使用以下命令：</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="6"><li>确保iptables保存规则并在启动时加载规则，使用以下命令：</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo sh -c &quot;iptables-save &gt; /etc/iptables.rules&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="7"><li>编辑网络设置文件以在启动时加载iptables规则，使用以下命令：</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo nano /etc/network/interfaces</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在文件末尾添加以下行：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>pre-up iptables-restore &lt; /etc/iptables.rules</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>保存并关闭文件。</p><ol start="8"><li>重新启动网络服务，使用以下命令：</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo service networking restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这将应用新的iptables规则并重新启动网络服务。</p><p>现在，8989端口的流量应该会被转发到IP 172.114.2.5的80端口。请注意，这些设置将在重新启动后保持，除非手动更改iptables规则，否则将一直生效。同时，确保网络安全性和合规性是非常重要的，请谨慎操作并考虑所需的安全设置。</p><ul><li>VLAN和子网</li></ul><p>子网通过不同ip网段隔离，但是有路由就可以互相访问，VLAN通过报文的Tag区分，不同直接互相访问，即使有配置路由</p><ul><li>二层网络和三层网络、</li></ul><p>在OSI模型之中，2层是数据链路层，也就是网卡交换机之间，没有路由器，他们之间是MAC地址通讯，MAC地址作为识别彼此，局域网（LAN）内的通信，二层网络设备有交换机； 3层是网络层，IP、ICMP协议基于这一层实现，他们识别彼此是用IP，广域网（WAN）上进行通信，设备使用IP地址来识别彼此，并且他们可以不在同一个局域网，这一层有路由器，路由器（Router）将数据包从一个网络发送到另一个网络；</p><p>二层网络和三层网络是网络世界中常用的两个术语，它们描述了不同层次上进行网络通信的方式。</p><ol><li><p>二层网络（Layer 2 Network）： 二层网络基于数据链路层（Layer 2，链路层）进行通信。数据链路层负责在物理网络中直接连接的两个设备之间传输数据。在二层网络中，设备通过MAC地址（媒体访问控制地址）来识别彼此，并使用MAC地址表来决定数据包应该从哪个接口发送或转发。二层网络主要侧重于局域网（LAN）内的通信，常用的二层设备包括交换机（Switch）。</p></li><li><p>三层网络（Layer 3 Network）： 三层网络基于网络层（Layer 3）进行通信。网络层负责在整个网络中为数据包提供逻辑寻址和路由功能。在三层网络中，设备使用IP地址来识别彼此，并通过路由器（Router）将数据包从一个网络发送到另一个网络。网络层还支持跨网络的通信，使得设备可以在广域网（WAN）上进行通信。三层网络通常使用IP协议来进行数据传输。</p></li></ol><p>简而言之，二层网络主要关注局域网内设备之间的直接通信，而三层网络则更注重不同网络之间的通信和路由。通常情况下，较小的网络可以使用二层网络，而更复杂或跨越多个网络的场景则需要使用三层网络。</p><p><a href="https://zhuanlan.zhihu.com/p/143654140" target="_blank" rel="noopener noreferrer">OSI</a></p><ul><li>二层交换机L2 switch\\三层交换机L3 switch</li></ul><p>二层交换机（L2 switch）是一种网络设备，它工作在OSI模型的第二层（数据链路层），主要用于在局域网内进行数据转发和转接。二层交换机通过学习MAC地址，为不同设备之间建立连接，并在接收到数据包时根据目标MAC地址选择转发端口，实现快速的数据交换。</p><p>三层交换机（L3 switch）是一种功能更为复杂的网络设备，它不仅能够在OSI模型的第二层进行数据转发，还能在第三层（网络层）进行路由的功能。三层交换机集成了路由器的部分功能，能够根据IP地址进行数据转发和路由选择。它可以根据数据包中的目标IP地址，通过查找路由表来选择最佳转发路径，从而实现不同子网之间的通信和互联。</p><p><a href="https://info.support.huawei.com/info-finder/encyclopedia/zh/VLAN.html" target="_blank" rel="noopener noreferrer">华为-VLAN vs 子网</a></p><ul><li><p>route -n 指令如何解析结果</p></li><li><p>Trunk是什么和VLAN什么关系</p></li></ul><p>Trunk在计算机网络中是指能够同时传输多个VLAN（Virtual Local Area Network，虚拟局域网）的网络链路或端口。它是一种物理链路或逻辑链路，可以在网络设备之间传送多个VLAN的数据。</p><p>VLAN是一种逻辑上的概念，可以将一个物理局域网划分成多个逻辑子网，使得不同的子网可以独立于彼此工作。VLAN通过在网络交换机上进行配置，将不同的端口划分到不同的VLAN中，实现逻辑上的隔离。在VLAN中，不同VLAN的设备之间通常是无法直接通信的。</p><p>而Trunk端口能够同时传输多个VLAN的数据，使得不同VLAN的设备之间可以进行通信。通过将Trunk端口连接到另一个支持Trunk功能的设备上，可以实现不同VLAN之间的通信和互联。Trunk端口在网络设备之间传输VLAN标签，使得数据可以在不同VLAN之间传输。这样，Trunk和VLAN的关系就是Trunk端口提供了VLAN之间的数据传输功能。</p><ul><li>交换机和路由器分别是什么网桥又是什么</li></ul><p>交换机是一种用于在局域网内进行数据交换的网络设备，交换机通过物理地址（MAC地址）来识别和转发数据。 路由器是一种用于在不同网络之间转发数据的网络设备，连接不同的局域网、广域网或互联网，并根据目标IP地址进行数据包转发。 网桥（Bridge）是一种用于连接和转发局域网数据的网络设备，可以理解为具有多个端口的交换机，但它主要侧重于数据链路层（第二层）的转发。也是通过MAC地址转发数据包。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@i-7B581709 ~]# route -n</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看到默认网关数据转发通过 br-ext 网桥转发流量</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> routing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Destination</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Gateway</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         Genmask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         Flags</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Metric</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ref</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Iface</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10.16.207.254</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0.0.0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         UG</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  （当前系统默认的网关）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">10.16.200.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         255.255.248.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   U</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   （目标网络）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">169.254.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         255.255.0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     U</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    （目标网络）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">192.168.122.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         255.255.255.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   U</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virbr0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    （本地网络）</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">这是一份路由表，显示了当前系统的网络路由信息。具体解析如下：</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第一列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Destination：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 目标网络或主机的IP地址或地址范围，0.0.0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示默认的路由，即默认的网关。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第二列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Gateway：下一跳路由器的IP地址，用于将数据包转发到目标网络或主机。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第三列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Genmask：子网掩码，用于指定目标网络或主机的范围（即该地址范围所包含的IP地址）。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第四列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Flags：路由标志，用于标识路由的属性和状态。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第五列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Metric：路由的距离度量值，用于指定优先级，通常是跃点数或延迟等。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第六列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ref：路由的引用计数，表示有多少个套接字正在使用这个路由。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第七列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Use：路由的使用计数，表示已经经过该路由的数据包数量。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第八列</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Iface：该路由所对应的网络接口。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">根据这份路由表，可以知道</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">当前系统默认的网关是</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10.16.207.254，</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">目标网络为</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 和</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 169.254.0.0/16</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">以及本地网络</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 所对应的网络接口为</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virbr0。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Flags的UG和U的意思：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  UG</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示为</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Up/下一跳为网关</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示Up/可用</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ip route 结果解析</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@i-7B581709 ~]# ip route</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 默认路由，目标IP转发到固定网关 - 主要为了查看这个</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> via</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.207.254</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.203.160</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">169.254.0.0/16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virbr0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.122.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> linkdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 路由表信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;default via 10.16.207.254 dev br-ext&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示默认路由，即如果目标IP地址没有匹配到任何已知的路由，则会将数据包发送到10.16.207.254网关设备，通过br-ext接口发送出去。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;10.16.200.0/21 dev br-ext proto kernel scope link src 10.16.203.160&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示直接连通网络，即10.16.200.0/21这个子网段可以直接通过br-ext接口访问，本机IP地址是10.16.203.160。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;169.254.0.0/16 dev br-ext scope link&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示自动配置IPv4地址（APIPA地址）的网络，即当本机无法获取到有效IP地址时，会自动分配一个169.254.x.x的IP地址，并可以在br-ext接口上进行通信。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;192.168.122.0/24 dev virbr0 proto kernel scope link src 192.168.122.1 linkdown&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示在虚拟网络设备virbr0上的子网，本机通过这个设备连接到虚拟机。但是因为该设备处于linkdown（未连接）状态，无法进行通信。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看防火墙服务是否开启</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalk</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看某一个ip是否可以访问</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ping</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.1.23</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查看某一个ip的某一个端口是否可以访问</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> telnet</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8881</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Trying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1...</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1.</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Escape</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> character</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;^]&#39;.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>端口是否有服务在监听</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -tunlp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8881</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0.0.0.0:8881</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 21748/ovsdb-server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-t：显示TCP协议的连接情况</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-u：显示UDP协议的连接情况</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-n：显示IP地址和端口号，而不是域名和服务名</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-l：显示监听状态的连接情况</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-p：显示与连接相关的进程PID和进程名</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8881</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0.0.0.0:8881</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LISTEN</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>iptables是干嘛的，来个小实验试试iptables的功能</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看当前的iptables规则</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 阻止所有对SSH端口（默认为22）的入站请求</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DROP</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看刚刚添加的规则</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 允许某些IP访问SSH端口</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.1.100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ACCEPT</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 删除添加的规则</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -D</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DROP</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -D</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.1.100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ACCEPT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>不同的网段 ip 之间如何通信</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在不同的网段中，通信需要经过路由器进行转发。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">路由器在不同的网段之间建立连接，使得数据包可以被正确转发到目标网络中。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">通常，路由器会将其接收到的数据包进行分析，判断目标网络的地址和源网络的地址，然后将数据包转发到相应的网络中。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">经过多跳路由转发，最终数据包会到达目标主机，实现网段之间的通信。</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> route</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> via</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.207.254</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.203.160</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">169.254.0.0/16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virbr0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.122.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> linkdown</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在上面这个环境下，169.254.0.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 和</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.200.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 如何通信？</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">它们处于不同的子网中无法直接通信。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">其中，169.254.0.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是一个特殊的自动分配</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 地址，通常用于本地连接测试和临时使用，而</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.200.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 则是一个正式的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 地址。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">要实现这两个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 地址之间的通信，需要配置一个路由器来进行转发。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">路由器需要同时连接这两个子网，并具有相应的路由配置。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在这种情况下，可以在路由器上添加一个静态路由，将目标地址</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 169.254.0.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的数据包转发到</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 子网中。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">具体步骤如下：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 找到可用的路由器，将其连接到</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 169.254.0.0/16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 和</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 子网中。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 在路由器上添加一个静态路由，将目标地址</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 169.254.0.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的数据包转发到</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 子网中。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 在源主机上添加一个默认路由，将所有未知的数据包转发到路由器。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">这样，当源主机发送数据包到目标地址</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 169.254.0.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 时，数据包会先被发送到路由器。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">路由器会检查目标地址，发现它不在本地子网中，然后将数据包转发到</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 子网中。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">最终，数据包到达目标主机，完成通信。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在Linux上如何配置静态路由呢</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> route</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> destination_network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netmask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> subnet_mask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> next_hop_ip_address</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># linux 上如何配置静态路由将 169.254.0.1 的数据包转发到 10.16.200.0/21 子网中</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如何查看网段与网卡之间的关系</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> route</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 目标IP地址没有匹配到任何已知的路由那么就会走这个默认路由 br-ext</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> via</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.207.254</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># （10.16.200.0/21这个子网段可以直接通过br-ext接口访问 本机器IP是10.16.203.160）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">10.16.200.0/21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.16.203.160</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># （本机无法获取到有效IP地址时，会自动分配一个169.254.x.x的IP地址，并可以在br-ext接口上进行通信）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">169.254.0.0/16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> br-ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   </span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 虚拟网络设备virbr0子网通过设备192.168.122.1连接到虚拟机且linkdown（未连接）状态无法通信</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">192.168.122.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virbr0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.122.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> linkdown</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>相同网段的ip如何通信的</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">相同网段的IP地址可以通过交换机或者路由器相互通信。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如果是在同一局域网内，则直接通过交换机进行通信。交换机根据每个主机的MAC地址，将数据包传递到目标主机。</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如果是不在同一局域网内，则需要通过路由器进行通信。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">路由器将不同网段的数据包转发到目标主机所在的网段。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在这个过程中，路由器会根据路由表匹配目标IP地址，然后将数据包转发到合适的下一跳路由器或者主机。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">最终将数据包传递到目标主机。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">无论是通过交换机还是路由器，相同网段的主机之间的通信都是基于MAC地址的。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">每个主机都会有一个唯一的MAC地址，交换机和路由器都会使用这个地址进行数据包转发。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ping的原理</li></ul><ol><li>基于ICMP协议的网络工具;</li><li>测试网络连接和诊断网络问题;</li><li>原理是向目标主机发送数据包并等待该主机返回响应;</li><li>发送附加时间戳，目标主机也会记录接收到的时间戳从而计算网络延迟;</li></ol><ul><li>veth pair是什么</li></ul><ol><li>一种Linux内核网络设备;</li><li>用于创建一对虚拟的网络接口设备;</li><li>Docker中veth pair用来连接宿主机和容器网络;</li></ol><ul><li>VLAN是什么</li></ul><ol><li>VLAN（Virtual Local Area Network，虚拟局域网）是一种将局域网分割成多个逻辑上的子网的技术。</li><li>实现逻辑隔离：不同VLAN之间的设备之间无法直接通信，实现逻辑上的隔离。</li><li>管理网络流量：可以根据需要将不同VLAN的流量进行不同的QoS(Quality of Service)策略处理。</li><li>简化网络管理：可以按照业务需要、设备类型、用户等不同维度对网络进行管理，便于管理和维护。</li><li>提高网络安全性：可以将安全要求较高的设备分配到单独的VLAN中，实现更为严格的安全控制。</li></ol><ul><li>虚拟交换机 Virtual Switch 是什么</li></ul><ol><li>软件定义的网络交换机;</li><li>运行在虚拟化平台上;</li><li>管理虚拟机之间的网络通信;</li><li>虚拟机之间进行流量转发，并提供通用网络服务;</li><li>虚拟网络和物理网络之间的桥梁;</li></ol><ul><li>交换机是什么</li></ul><ol><li>一种网络设备;</li><li>在计算机网络中将数据包从一个端口转发到另一个端口;</li><li>根据目的地址转发数据包;</li><li>设备有普通交换机、三层交换机、四层交换机、光纤交换机等;</li></ol><ul><li>什么叫广播风暴</li></ul><p>广播风暴（Broadcast Storm）是指在计算机网络中，某个节点广播数据包或消息时，其他节点因无法处理而继续向其他节点广播，从而形成的一种网络问题。当网络中的广播数据包或消息数量过多时，网络将会被占满，网络流量将急剧增加，导致网络严重拥堵、延迟增加、数据丢失等问题。广播风暴通常是由于网络中出现了网络环路、网络设备故障、算法错误等原因而引起的。为避免广播风暴的发生，可以采用限制广播域的方法、配置合理的网络拓扑结构、使用网络设备的广播抑制功能等措施来解决。</p><ol><li>建立连接后双方持有socket，在linux文件系统上的表现是什么</li><li>如果一直保持连接，中间的路由器离线了会怎么样</li><li>kubernetes的controller的watch机制，http2.0协议下保持连接，有没有保活机制</li><li>服务端的连接已经释放了，客户端还是established继续发送数据会怎么样</li></ol><h3 id="相关资料" tabindex="-1"><a class="header-anchor" href="#相关资料"><span>相关资料</span></a></h3><p><a href="https://juejin.cn/post/6884881812145995790" target="_blank" rel="noopener noreferrer">深入K8S组网架构和Flannel原理</a><a href="https://github.com/cilium" target="_blank" rel="noopener noreferrer">https://github.com/cilium</a><a href="https://cilium.io/" target="_blank" rel="noopener noreferrer">https://cilium.io/</a><a href="https://docs.cilium.io/en/stable/" target="_blank" rel="noopener noreferrer">https://docs.cilium.io/en/stable/</a><a href="https://hub.docker.com/r/cilium/cilium" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/cilium/cilium</a><a href="https://zhuanlan.zhihu.com/p/471220158" target="_blank" rel="noopener noreferrer">使用 Cilium 作为网络插件部署 K8s + KubeSphere</a><a href="https://zhuanlan.zhihu.com/p/135298580" target="_blank" rel="noopener noreferrer">在K8s集群上部署Istio的三种方式</a><a href="https://www.runoob.com/linux/linux-comm-ip.html" target="_blank" rel="noopener noreferrer">Linux ip 命令</a><a href="https://zhuanlan.zhihu.com/p/33658624" target="_blank" rel="noopener noreferrer">VPC浅谈</a><a href="https://www.sohu.com/a/127408616_465914" target="_blank" rel="noopener noreferrer">关于阿里经典网络问题</a></p>',96)]))}]]),h=JSON.parse('{"path":"/posts/network/DNS%E9%85%8D%E7%BD%AE.html","title":"DNS配置","lang":"zh-CN","frontmatter":{"title":"DNS配置","tags":["network"],"categories":["network"],"description":"一、什么是DNS DNS（Domain Name System）是一个用于将域名转换为与之关联的IP地址的分布式系统。 在Linux上，有几个与DNS相关的配置： 二、Linux与DNS相关命令 /etc/resolv.conf文件：这个文件包含了DNS服务器的配置信息，如名称服务器的IP地址、搜索域等。 Ubuntu 下 DNS 解析相关的命令sys...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://weiqiangxu.github.io/posts/network/DNS%E9%85%8D%E7%BD%AE.html"}],["meta",{"property":"og:site_name","content":"笔记本"}],["meta",{"property":"og:title","content":"DNS配置"}],["meta",{"property":"og:description","content":"一、什么是DNS DNS（Domain Name System）是一个用于将域名转换为与之关联的IP地址的分布式系统。 在Linux上，有几个与DNS相关的配置： 二、Linux与DNS相关命令 /etc/resolv.conf文件：这个文件包含了DNS服务器的配置信息，如名称服务器的IP地址、搜索域等。 Ubuntu 下 DNS 解析相关的命令sys..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"network"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"DNS配置\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuweiqiang\\",\\"url\\":\\"https://weiqiangxu.github.io\\"}]}"]]},"headers":[{"level":3,"title":"一、什么是DNS","slug":"一、什么是dns","link":"#一、什么是dns","children":[]},{"level":3,"title":"二、Linux与DNS相关命令","slug":"二、linux与dns相关命令","link":"#二、linux与dns相关命令","children":[]},{"level":3,"title":"Q&A","slug":"q-a","link":"#q-a","children":[]},{"level":3,"title":"相关资料","slug":"相关资料","link":"#相关资料","children":[]}],"readingTime":{"minutes":17.91,"words":5373},"filePathRelative":"posts/network/DNS配置.md","excerpt":"<h3>一、什么是DNS</h3>\\n<ol>\\n<li>DNS（Domain Name System）是一个用于将域名转换为与之关联的IP地址的分布式系统。</li>\\n</ol>\\n<p>在Linux上，有几个与DNS相关的配置：</p>\\n<h3>二、Linux与DNS相关命令</h3>\\n<ol>\\n<li><code>/etc/resolv.conf</code>文件：这个文件包含了DNS服务器的配置信息，如名称服务器的IP地址、搜索域等。</li>\\n</ol>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 未配置DNS Server的</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@i-62BEC048 ~]# cat /etc/resolv.conf</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># Generated by NetworkManager</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 已经配置了DNS Server的</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@i-62BEC048 ~]# cat /etc/resolv.conf</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># Generated by NetworkManager</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">nameserver</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 114.114.114.114</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);