"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2108],{6262:(s,e)=>{e.A=(s,e)=>{const n=s.__vccOpts||s;for(const[s,i]of e)n[s]=i;return n}},7324:(s,e,n)=>{n.r(e),n.d(e,{comp:()=>l,data:()=>d});var i=n(641);const a={},l=(0,n(6262).A)(a,[["render",function(s,e){return(0,i.uX)(),(0,i.CE)("div",null,e[0]||(e[0]=[(0,i.Fv)('<h1 id="基于docker搭建redis集群" tabindex="-1"><a class="header-anchor" href="#基于docker搭建redis集群"><span>基于Docker搭建Redis集群</span></a></h1><h3 id="创建本地data目录和conf文件夹" tabindex="-1"><a class="header-anchor" href="#创建本地data目录和conf文件夹"><span>创建本地data目录和conf文件夹</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node1/data \\</span></span>\n<span class="line"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node1/conf \\</span></span>\n<span class="line"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node2/data \\</span></span>\n<span class="line"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node2/conf \\</span></span>\n<span class="line"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node3/data \\</span></span>\n<span class="line"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node3/conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /Users/xuweiqiang/Documents/redis/cluster/node1/conf &amp;&amp; touch redis.conf</span></span>\n<span class="line"><span>cd /Users/xuweiqiang/Documents/redis/cluster/node2/conf &amp;&amp; touch redis.conf</span></span>\n<span class="line"><span>cd /Users/xuweiqiang/Documents/redis/cluster/node3/conf &amp;&amp; touch redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置写入redis-conf文件" tabindex="-1"><a class="header-anchor" href="#配置写入redis-conf文件"><span>配置写入redis.conf文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#端口</span></span>\n<span class="line"><span>port 6379</span></span>\n<span class="line"><span>bind 0.0.0.0</span></span>\n<span class="line"><span>#启用集群模式</span></span>\n<span class="line"><span>cluster-enabled yes </span></span>\n<span class="line"><span>cluster-config-file nodes.conf</span></span>\n<span class="line"><span>#超时时间</span></span>\n<span class="line"><span>cluster-node-timeout 5000</span></span>\n<span class="line"><span># 集群连接地址及端口</span></span>\n<span class="line"><span># cluster-announce-ip 192.168.3.13</span></span>\n<span class="line"><span># cluster-announce-port 6379</span></span>\n<span class="line"><span># cluster-announce-bus-port 16379</span></span>\n<span class="line"><span>appendonly yes</span></span>\n<span class="line"><span>#集群加密</span></span>\n<span class="line"><span># masterauth 123456</span></span>\n<span class="line"><span># requirepass 123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="节点一" tabindex="-1"><a class="header-anchor" href="#节点一"><span>节点一</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker run -d --name redis-node1 \\</span></span>\n<span class="line"><span>--privileged=true \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/redis/cluster/node1/conf/redis.conf:/etc/redis/redis.conf \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/redis/cluster/node1/data:/data \\</span></span>\n<span class="line"><span>-p 6380:6379 redis:7.0 \\</span></span>\n<span class="line"><span>redis-server /etc/redis/redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="节点二" tabindex="-1"><a class="header-anchor" href="#节点二"><span>节点二</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker run -d --name redis-node2 \\</span></span>\n<span class="line"><span>--privileged=true \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/redis/cluster/node2/conf/redis.conf:/etc/redis/redis.conf \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/redis/cluster/node2/data:/data \\</span></span>\n<span class="line"><span>-p 6381:6379 redis:7.0 \\</span></span>\n<span class="line"><span>redis-server /etc/redis/redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="节点三" tabindex="-1"><a class="header-anchor" href="#节点三"><span>节点三</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker run -d --name redis-node3 \\</span></span>\n<span class="line"><span>--privileged=true \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/redis/cluster/node3/conf/redis.conf:/etc/redis/redis.conf \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/redis/cluster/node3/data:/data \\</span></span>\n<span class="line"><span>-p 6382:6379 redis:7.0 \\</span></span>\n<span class="line"><span>redis-server /etc/redis/redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动集群模式" tabindex="-1"><a class="header-anchor" href="#启动集群模式"><span>启动集群模式</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 查看容器的IP [IPAddress]</span></span>\n<span class="line"><span>docker inspect redis-node1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 任意进入一个节点的容器内</span></span>\n<span class="line"><span>redis-cli --cluster create 172.17.0.2:6379 172.17.0.3:6379 172.17.0.4:6379 --cluster-replicas 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="测试集群" tabindex="-1"><a class="header-anchor" href="#测试集群"><span>测试集群</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>redis-cli -c</span></span>\n<span class="line"><span>set id 999</span></span>\n<span class="line"><span># 切换节点</span></span>\n<span class="line"><span>get id</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置信息" tabindex="-1"><a class="header-anchor" href="#配置信息"><span>配置信息</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>port：节点端口；</span></span>\n<span class="line"><span>requirepass：添加访问认证；</span></span>\n<span class="line"><span>masterauth：如果主节点开启了访问认证，从节点访问主节点需要认证；</span></span>\n<span class="line"><span>protected-mode：保护模式，默认值 yes，即开启。开启保护模式以后，需配置 bind ip 或者设置访问密码；关闭保护模式，外部网络可以直接访问；</span></span>\n<span class="line"><span>daemonize：是否以守护线程的方式启动（后台启动），默认 no；</span></span>\n<span class="line"><span>appendonly：是否开启 AOF 持久化模式，默认 no；</span></span>\n<span class="line"><span>cluster-enabled：是否开启集群模式，默认 no；</span></span>\n<span class="line"><span>cluster-config-file：集群节点信息文件；</span></span>\n<span class="line"><span>cluster-node-timeout：集群节点连接超时时间；</span></span>\n<span class="line"><span>cluster-announce-ip：集群节点 IP，填写宿主机的 IP；</span></span>\n<span class="line"><span>cluster-announce-port：集群节点映射端口；</span></span>\n<span class="line"><span>cluster-announce-bus-port：集群节点总线端口。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="相关命令" tabindex="-1"><a class="header-anchor" href="#相关命令"><span>相关命令</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># docker查看容器信息</span></span>\n<span class="line"><span>docker inspect redis-node1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参考博客" tabindex="-1"><a class="header-anchor" href="#参考博客"><span>参考博客</span></a></h3><p><a href="https://www.cnblogs.com/edda/p/16268845.html" target="_blank" rel="noopener noreferrer">docker搭建redis集群</a>】</p><h1 id="full-stack-knowledge-system" tabindex="-1"><a class="header-anchor" href="#full-stack-knowledge-system"><span>Full_stack_knowledge_system</span></a></h1><p><a href="https://pdai.tech/" target="_blank" rel="noopener noreferrer">pdai.tech</a></p>',25)]))}]]),d=JSON.parse('{"path":"/posts/redis/Redis%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8FDocker%E6%90%AD%E5%BB%BA.html","title":"基于Docker搭建Redis集群","lang":"zh-CN","frontmatter":{"hide":true,"description":"基于Docker搭建Redis集群 创建本地data目录和conf文件夹 配置写入redis.conf文件 节点一 节点二 节点三 启动集群模式 测试集群 配置信息 相关命令 参考博客 docker搭建redis集群】 Full_stack_knowledge_system pdai.tech","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://weiqiangxu.github.io/posts/redis/Redis%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8FDocker%E6%90%AD%E5%BB%BA.html"}],["meta",{"property":"og:site_name","content":"QuickStart程序员"}],["meta",{"property":"og:title","content":"基于Docker搭建Redis集群"}],["meta",{"property":"og:description","content":"基于Docker搭建Redis集群 创建本地data目录和conf文件夹 配置写入redis.conf文件 节点一 节点二 节点三 启动集群模式 测试集群 配置信息 相关命令 参考博客 docker搭建redis集群】 Full_stack_knowledge_system pdai.tech"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"基于Docker搭建Redis集群\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuweiqiang\\",\\"url\\":\\"https://weiqiangxu.github.io\\"}]}"]]},"headers":[{"level":3,"title":"创建本地data目录和conf文件夹","slug":"创建本地data目录和conf文件夹","link":"#创建本地data目录和conf文件夹","children":[]},{"level":3,"title":"配置写入redis.conf文件","slug":"配置写入redis-conf文件","link":"#配置写入redis-conf文件","children":[]},{"level":3,"title":"节点一","slug":"节点一","link":"#节点一","children":[]},{"level":3,"title":"节点二","slug":"节点二","link":"#节点二","children":[]},{"level":3,"title":"节点三","slug":"节点三","link":"#节点三","children":[]},{"level":3,"title":"启动集群模式","slug":"启动集群模式","link":"#启动集群模式","children":[]},{"level":3,"title":"测试集群","slug":"测试集群","link":"#测试集群","children":[]},{"level":3,"title":"配置信息","slug":"配置信息","link":"#配置信息","children":[]},{"level":3,"title":"相关命令","slug":"相关命令","link":"#相关命令","children":[]},{"level":3,"title":"参考博客","slug":"参考博客","link":"#参考博客","children":[]}],"readingTime":{"minutes":1.61,"words":482},"filePathRelative":"posts/redis/Redis集群模式Docker搭建.md","excerpt":"\\n<h3>创建本地data目录和conf文件夹</h3>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node1/data \\\\</span></span>\\n<span class=\\"line\\"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node1/conf \\\\</span></span>\\n<span class=\\"line\\"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node2/data \\\\</span></span>\\n<span class=\\"line\\"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node2/conf \\\\</span></span>\\n<span class=\\"line\\"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node3/data \\\\</span></span>\\n<span class=\\"line\\"><span>mkdir -p /Users/xuweiqiang/Documents/redis/cluster/node3/conf</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);