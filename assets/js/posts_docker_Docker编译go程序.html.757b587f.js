"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8102],{6262:(s,e)=>{e.A=(s,e)=>{const n=s.__vccOpts||s;for(const[s,i]of e)n[s]=i;return n}},3257:(s,e,n)=>{n.r(e),n.d(e,{comp:()=>l,data:()=>d});var i=n(641);const a={},l=(0,n(6262).A)(a,[["render",function(s,e){return(0,i.uX)(),(0,i.CE)("div",null,e[0]||(e[0]=[(0,i.Fv)('<h1 id="docker编译go程序" tabindex="-1"><a class="header-anchor" href="#docker编译go程序"><span>Docker编译go程序</span></a></h1><ol><li>编写Dockerfile制作镜像</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir gobuilder &amp;&amp; cd gobuilder</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>touch Dockerfile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>FROM golang:1.14.3-stretch</span></span>\n<span class="line"><span>MAINTAINER author &lt;email@xxx.com&gt;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\</span></span>\n<span class="line"><span>    ca-certificates \\</span></span>\n<span class="line"><span>    wget \\</span></span>\n<span class="line"><span>    vim \\</span></span>\n<span class="line"><span>    htop \\</span></span>\n<span class="line"><span>    curl \\</span></span>\n<span class="line"><span>    sudo \\</span></span>\n<span class="line"><span>    git \\</span></span>\n<span class="line"><span>    net-tools \\</span></span>\n<span class="line"><span>    tzdata \\</span></span>\n<span class="line"><span>    &amp;&amp; ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\</span></span>\n<span class="line"><span>    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>ENV GOBIN=$GOPATH/bin</span></span>\n<span class="line"><span>ENV GO111MODULE=on</span></span>\n<span class="line"><span>ENV GOPROXY=https://goproxy.io,direct</span></span>\n<span class="line"><span>ENV TZ=Asia/Shanghai</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>CMD [&quot;sh&quot;, &quot;launch.sh&quot;]</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>WORKDIR $GOPATH/src/app</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>ENTRYPOINT [&quot;go&quot;, &quot;build&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>制作镜像</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd gobuilder</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>docker build -t gobuilder:1.14.3-stretch .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>编译go代码</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 运行以下容器编译你的go项目并导出可执行文件到当前目录下</span></span>\n<span class="line"><span>docker run --rm -it -v /Users/xuweiqiang/Documents/bingo/test_go/:/go/src/app gobuilder:1.14.3-stretch</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参考博客" tabindex="-1"><a class="header-anchor" href="#参考博客"><span>参考博客</span></a></h3><p><a href="https://juejin.cn/post/6844904166851084296" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844904166851084296</a></p><h3 id="centos" tabindex="-1"><a class="header-anchor" href="#centos"><span>centos</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker run -itd --name centos-test \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/bingo/test_go/:/home \\</span></span>\n<span class="line"><span>centos:centos7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 执行上面编译的golang代码</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>sh-4.2# ./test_go</span></span>\n<span class="line"><span>hello world</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker run -itd --name centos-test \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/bingo/kubernetes/:/home \\</span></span>\n<span class="line"><span>centos:centos7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sh-make-command-not-found" tabindex="-1"><a class="header-anchor" href="#sh-make-command-not-found"><span>sh: make: command not found</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>yum -y install gcc automake autoconf libtool make</span></span>\n<span class="line"><span>yum install gcc gcc-c++</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="can-t-find-go-in-path-please-fix-and-retry" tabindex="-1"><a class="header-anchor" href="#can-t-find-go-in-path-please-fix-and-retry"><span>Can&#39;t find &#39;go&#39; in PATH, please fix and retry</span></a></h3><h3 id="如何将以上的所有依赖打入一个镜像" tabindex="-1"><a class="header-anchor" href="#如何将以上的所有依赖打入一个镜像"><span>如何将以上的所有依赖打入一个镜像</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir centos_with_golang</span></span>\n<span class="line"><span>touch Dockfile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>FROM centos:centos7</span></span>\n<span class="line"><span>MAINTAINER xuweiqiang &lt;435861851@xxx.com&gt;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>RUN yum -y install gcc automake autoconf libtool make</span></span>\n<span class="line"><span>RUN yum install gcc gcc-c++</span></span>\n<span class="line"><span>RUN yum install -y rsync</span></span>\n<span class="line"><span>RUN chmod +x _output/bin/prerelease-lifecycle-gen</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>FROM golang:1.20.1</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>ENV GO111MODULE=on</span></span>\n<span class="line"><span>ENV GOPROXY=https://goproxy.io,direct</span></span>\n<span class="line"><span>ENV TZ=Asia/Shanghai</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker build -t mycentos:0.0.1 .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker run -itd \\</span></span>\n<span class="line"><span>-c 4096 \\</span></span>\n<span class="line"><span>-u 0 \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/bingo/kubernetes/:/home \\</span></span>\n<span class="line"><span>--privileged=true \\</span></span>\n<span class="line"><span>--name mycentos-test123 \\</span></span>\n<span class="line"><span>mycentos:0.0.1</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>docker run -itd --name mycentos-test2 \\</span></span>\n<span class="line"><span>-v /Users/xuweiqiang/Documents/bingo/test_go/:/home \\</span></span>\n<span class="line"><span>mycentos:0.0.1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dockerfile制作多个基础镜像的镜像-多个from" tabindex="-1"><a class="header-anchor" href="#dockerfile制作多个基础镜像的镜像-多个from"><span>dockerfile制作多个基础镜像的镜像(多个FROM)</span></a></h3><h3 id="docker运行时指定磁盘和cpu大小" tabindex="-1"><a class="header-anchor" href="#docker运行时指定磁盘和cpu大小"><span>docker运行时指定磁盘和cpu大小</span></a></h3><h3 id="docker里面执行遇到permission-denied" tabindex="-1"><a class="header-anchor" href="#docker里面执行遇到permission-denied"><span>docker里面执行遇到Permission denied</span></a></h3><h3 id="docker容器运行-sh文件时permission-denied错误" tabindex="-1"><a class="header-anchor" href="#docker容器运行-sh文件时permission-denied错误"><span>Docker容器运行.sh文件时Permission denied错误</span></a></h3><h3 id="进入docker的容器之中" tabindex="-1"><a class="header-anchor" href="#进入docker的容器之中"><span>进入docker的容器之中</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker exec -it {$container_id} /bin/sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="makefile调用sh文件" tabindex="-1"><a class="header-anchor" href="#makefile调用sh文件"><span>Makefile调用sh文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>fmt:</span></span>\n<span class="line"><span>\techo &quot;hello&quot;</span></span>\n<span class="line"><span>\tsh ./build.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实战之使用docker编译k8s" tabindex="-1"><a class="header-anchor" href="#实战之使用docker编译k8s"><span>实战之使用docker编译k8s</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker run --rm -v /Users/xuweiqiang/Documents/bingo/kubernetes:/go/src/k8s.io/kubernetes -it gcrcontainer/kube-cross:v1.13.6-1 bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><a href="https://www.kancloud.cn/pshizhsysu/kubernetes/2204250" target="_blank" rel="noopener noreferrer">看云kubeadm编译</a></p>',33)]))}]]),d=JSON.parse('{"path":"/posts/docker/Docker%E7%BC%96%E8%AF%91go%E7%A8%8B%E5%BA%8F.html","title":"Docker编译go程序","lang":"zh-CN","frontmatter":{"description":"Docker编译go程序 编写Dockerfile制作镜像 制作镜像 编译go代码 参考博客 https://juejin.cn/post/6844904166851084296 centos sh: make: command not found Can\'t find \'go\' in PATH, please fix and retry 如何将以上的...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://weiqiangxu.github.io/posts/docker/Docker%E7%BC%96%E8%AF%91go%E7%A8%8B%E5%BA%8F.html"}],["meta",{"property":"og:site_name","content":"QuickStart程序员"}],["meta",{"property":"og:title","content":"Docker编译go程序"}],["meta",{"property":"og:description","content":"Docker编译go程序 编写Dockerfile制作镜像 制作镜像 编译go代码 参考博客 https://juejin.cn/post/6844904166851084296 centos sh: make: command not found Can\'t find \'go\' in PATH, please fix and retry 如何将以上的..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker编译go程序\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuweiqiang\\",\\"url\\":\\"https://weiqiangxu.github.io\\"}]}"]]},"headers":[{"level":3,"title":"参考博客","slug":"参考博客","link":"#参考博客","children":[]},{"level":3,"title":"centos","slug":"centos","link":"#centos","children":[]},{"level":3,"title":"sh: make: command not found","slug":"sh-make-command-not-found","link":"#sh-make-command-not-found","children":[]},{"level":3,"title":"Can\'t find \'go\' in PATH, please fix and retry","slug":"can-t-find-go-in-path-please-fix-and-retry","link":"#can-t-find-go-in-path-please-fix-and-retry","children":[]},{"level":3,"title":"如何将以上的所有依赖打入一个镜像","slug":"如何将以上的所有依赖打入一个镜像","link":"#如何将以上的所有依赖打入一个镜像","children":[]},{"level":3,"title":"dockerfile制作多个基础镜像的镜像(多个FROM)","slug":"dockerfile制作多个基础镜像的镜像-多个from","link":"#dockerfile制作多个基础镜像的镜像-多个from","children":[]},{"level":3,"title":"docker运行时指定磁盘和cpu大小","slug":"docker运行时指定磁盘和cpu大小","link":"#docker运行时指定磁盘和cpu大小","children":[]},{"level":3,"title":"docker里面执行遇到Permission denied","slug":"docker里面执行遇到permission-denied","link":"#docker里面执行遇到permission-denied","children":[]},{"level":3,"title":"Docker容器运行.sh文件时Permission denied错误","slug":"docker容器运行-sh文件时permission-denied错误","link":"#docker容器运行-sh文件时permission-denied错误","children":[]},{"level":3,"title":"进入docker的容器之中","slug":"进入docker的容器之中","link":"#进入docker的容器之中","children":[]},{"level":3,"title":"Makefile调用sh文件","slug":"makefile调用sh文件","link":"#makefile调用sh文件","children":[]},{"level":3,"title":"实战之使用docker编译k8s","slug":"实战之使用docker编译k8s","link":"#实战之使用docker编译k8s","children":[]}],"readingTime":{"minutes":1.37,"words":410},"filePathRelative":"posts/docker/Docker编译go程序.md","excerpt":"\\n<ol>\\n<li>编写Dockerfile制作镜像</li>\\n</ol>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>mkdir gobuilder &amp;&amp; cd gobuilder</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>touch Dockerfile</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);