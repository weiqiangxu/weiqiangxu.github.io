"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9986],{6262:(s,e)=>{e.A=(s,e)=>{const a=s.__vccOpts||s;for(const[s,i]of e)a[s]=i;return a}},6066:(s,e,a)=>{a.r(e),a.d(e,{comp:()=>l,data:()=>d});var i=a(641);const n={},l=(0,a(6262).A)(n,[["render",function(s,e){return(0,i.uX)(),(0,i.CE)("div",null,e[0]||(e[0]=[(0,i.Fv)('<h1 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用"><span>基本使用</span></a></h1><ol><li>文件结构</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>touch Makefile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>test:</span></span>\n<span class="line"><span>    @echo &quot;hello world&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>@字符作用</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>@ 字符在命令行前，那么，这个命令将不被make显示出来</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>多行命令</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>fmt3:</span></span>\n<span class="line"><span>\t@echo &quot;hello world&quot;</span></span>\n<span class="line"><span>\t@cd /Users/xuweiqiang/Documents//message-center/domain/;pwd</span></span>\n<span class="line"><span>\t@pwd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>依赖上一行的结果需要同一行，所以上面的第二个pwd是当前目录</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="4"><li>变量</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>objectName = hello</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>test:</span></span>\n<span class="line"><span>    @echo $(objectName) and ${objectName}</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># golang模块名截取</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>PROJECT_NAME := $(shell grep &#39;module &#39; go.mod | awk &#39;{print $2}&#39; | sed &#39;s/code.google.com\\///g&#39;)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>.PHONY </span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>命令合集的别名组合</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>可以防止文件冲突：</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>比如 make test 你想执行的是当前目录下的Makefile的文件里面的tag为test的指令</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>但是他却认为是当前的test文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="指定文件" tabindex="-1"><a class="header-anchor" href="#指定文件"><span>指定文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>make -f Makefile1 clean</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="5"><li>makefile的shell脚本</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>PROJECT_NAME := $(shell grep &#39;module &#39; go.mod | awk &#39;{print $$2}&#39; | sed &#39;s/code.net\\///g&#39;)</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>等价于</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>grep &#39;module &#39; go.mod | awk &#39;{print $2}&#39; | sed &#39;s/code.net\\///g</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>因为 Makefile中的变量以$开头，所以，为了避免和shell的变量冲突，shell的变量以$$开头</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基本使用-1" tabindex="-1"><a class="header-anchor" href="#基本使用-1"><span>基本使用</span></a></h3><ol><li>变量</li><li>变量赋值</li><li>预定义变量</li><li>函数</li><li>伪目标 .PHONY</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>targets: prerequisites</span></span>\n<span class="line"><span>  command</span></span>\n<span class="line"><span>targets：规则的目标，可以是 Object File（一般称它为中间文件），也可以是可执行文件，还可以是一个标签；</span></span>\n<span class="line"><span>prerequisites：是我们的依赖文件，要生成 targets 需要的文件或者是目标。可以是多个，也可以是没有；</span></span>\n<span class="line"><span>command：make 需要执行的命令（任意的 shell 命令）。可以有多条命令，每一条命令占一行。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="makefile内容" tabindex="-1"><a class="header-anchor" href="#makefile内容"><span>Makefile内容</span></a></h1><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># Makefile内容</span></span>\n<span class="line"><span>.PHONY: all</span></span>\n<span class="line"><span>sharp = square</span></span>\n<span class="line"><span>desk = square</span></span>\n<span class="line"><span>table = circle</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>ifeq ($(sharp), $(desk))</span></span>\n<span class="line"><span>\tresult1 = &quot;desk == sharp&quot;</span></span>\n<span class="line"><span>endif</span></span>\n<span class="line"><span>ifneq &quot;$(table)&quot; &#39;square&#39;</span></span>\n<span class="line"><span>\tresult2 = &quot;table != square&quot;</span></span>\n<span class="line"><span>endif</span></span>\n<span class="line"><span>all:</span></span>\n<span class="line"><span>\t@echo $(result1)</span></span>\n<span class="line"><span>\t@echo $(result2)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参考博客" tabindex="-1"><a class="header-anchor" href="#参考博客"><span>参考博客</span></a></h3><p><a href="https://blog.csdn.net/ZBraveHeart/article/details/123187908" target="_blank" rel="noopener noreferrer">Makefile入门(超详细一文读懂)</a></p><p><a href="https://blog.csdn.net/Luckiers/article/details/124765087" target="_blank" rel="noopener noreferrer">Makefile入门</a></p><p><a href="https://www.cnblogs.com/paul-617/p/15501875.html" target="_blank" rel="noopener noreferrer">一叶飘落尽知秋-makefile详解</a></p>',25)]))}]]),d=JSON.parse('{"path":"/posts/makefile/%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html","title":"基本使用","lang":"zh-CN","frontmatter":{"hide":true,"description":"基本使用 文件结构 @字符作用 多行命令 变量 指定文件 makefile的shell脚本 基本使用 变量 变量赋值 预定义变量 函数 伪目标 .PHONY Makefile内容 参考博客 Makefile入门(超详细一文读懂) Makefile入门 一叶飘落尽知秋-makefile详解","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://weiqiangxu.github.io/posts/makefile/%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html"}],["meta",{"property":"og:site_name","content":"QuickStart程序员"}],["meta",{"property":"og:title","content":"基本使用"}],["meta",{"property":"og:description","content":"基本使用 文件结构 @字符作用 多行命令 变量 指定文件 makefile的shell脚本 基本使用 变量 变量赋值 预定义变量 函数 伪目标 .PHONY Makefile内容 参考博客 Makefile入门(超详细一文读懂) Makefile入门 一叶飘落尽知秋-makefile详解"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"基本使用\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuweiqiang\\",\\"url\\":\\"https://weiqiangxu.github.io\\"}]}"]]},"headers":[{"level":3,"title":"指定文件","slug":"指定文件","link":"#指定文件","children":[]},{"level":3,"title":"基本使用","slug":"基本使用-1","link":"#基本使用-1","children":[]},{"level":3,"title":"参考博客","slug":"参考博客","link":"#参考博客","children":[]}],"readingTime":{"minutes":1.46,"words":437},"filePathRelative":"posts/makefile/基本使用.md","excerpt":"\\n<ol>\\n<li>文件结构</li>\\n</ol>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>touch Makefile</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);